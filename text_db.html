<?php
echo "PHP 正在執行！<br>";
// 顯示所有錯誤
error_reporting(E_ALL);
ini_set('display_errors', 1);

echo "資料庫連接測試開始...<br>";

$host = 'localhost';
$dbname = 'coffee_shop_db';
$username = 'root';
$password = '';
$port = 3306;

try {
    echo "嘗試連接資料庫...<br>";
    $pdo = new PDO("mysql:host=$host;port=$port;dbname=$dbname", $username, $password);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    echo "✅ 資料庫連接成功！<br>";
    
    // 測試查詢
    $stmt = $pdo->query("SELECT COUNT(*) as count FROM products");
    $result = $stmt->fetch();
    echo "✅ 產品數量: " . $result['count'] . "<br>";
    
} catch (PDOException $e) {
    echo "❌ 資料庫錯誤: " . $e->getMessage() . "<br>";
}

echo "腳本執行完成！";
?>